#pragma once

#include <vector>
#include <unordered_map>
using namespace std;

#include "utils.hpp"
#include "time.hpp"

struct sharedInformation
{
	double numberOfEvaluations, numberOfSurrogateEvaluations;
	long long startTimeMilliseconds;
	double elitistSolutionHittingTimeMilliseconds,
	       elitistSolutionHittingTimeEvaluations;

	Individual elitist;
	double surrogateElitistFitness, minSurrogateFitness;
	solutionsArchive *evaluatedSolutions;
	bool firstEvaluationEver;
	bool surrogateModelTrained;
	double percentileThreshold;

	Pyramid *pyramid;
	PyObject *surrogateFitnessEstimationFunction, *surrogateModelTraining;
	
	unordered_set<vector<char >, hashVector > solutionsWithRealEvaluations;

	sharedInformation(int maxArchiveSize)
	{
		numberOfEvaluations = 0;
		startTimeMilliseconds = getCurrentTimeStampInMilliSeconds();
		firstEvaluationEver = true;
		evaluatedSolutions = new solutionsArchive(maxArchiveSize);
		pyramid = new Pyramid();
		surrogateModelTrained = false;
		surrogateElitistFitness = -1e+308;
		minSurrogateFitness = 1e+308;
		//all_graphs.resize(1);
	}

	~sharedInformation()
	{
		delete evaluatedSolutions;
		delete pyramid;
	}
};